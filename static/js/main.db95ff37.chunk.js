(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(83),i=a.n(s),o=(a(96),a(32)),l=a(220),c=a(14),d=a(15),u=a(18),p=a(16),h=a(17),m=a(221),f=(a(102),a(21)),v=a(3),b=a(85),y=a.n(b),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={subreddit:""},a.handleSubmit=a.handleSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"update",value:function(e){var t=this;return function(a){return t.setState(Object(f.a)({},e,a.target.value))}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.subreddit?this.state.subreddit:"all";this.props.clearPosts(),this.props.updateIsLoaded(),this.props.requestPosts("",0,a).then(function(){return t.props.createArray()}).then(function(){return t.props.updateTitle(a)}).then(function(){return t.props.updateIsLoaded()})}},{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("button",{className:"load_button ".concat(this.props.viewNsfw?"red_button":""),onClick:this.props.handleNSFW},this.props.viewNsfw?"nsfw on":"nsfw off"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Subreddit",type:"text",autoFocus:"autofocus",value:this.state.subreddit,onChange:this.update("subreddit")}),r.a.createElement("input",{className:"load_button",type:"submit",value:"Search"})),"r/".concat(this.props.title))}}]),t}(n.Component),E={transitionDuration:0},k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={afterString:"",viewNsfw:!1,title:"all",isLoaded:!1,array:[]},a.handleClick=a.handleClick.bind(Object(v.a)(Object(v.a)(a))),a.handleNSFW=a.handleNSFW.bind(Object(v.a)(Object(v.a)(a))),a.updateTitle=a.updateTitle.bind(Object(v.a)(Object(v.a)(a))),a.updateIsLoaded=a.updateIsLoaded.bind(Object(v.a)(Object(v.a)(a))),a.createArray=a.createArray.bind(Object(v.a)(Object(v.a)(a))),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.hasOwnProperty("array")){this.hydrateStateWithLocalStorage();var t=JSON.parse(localStorage.getItem("array")).length,a=JSON.parse(localStorage.getItem("title"));this.props.requestPosts("","",a,t).then(function(){return e.createArray()}).then(function(){return e.setState({isLoaded:!0})}).then(function(){return e.handleAfter()})}else this.props.requestPosts(this.state.afterString,this.props.posts.length,this.state.title).then(function(){return e.createArray()}).then(function(){return e.setState({isLoaded:!0})}).then(function(){return e.handleAfter()});window.addEventListener("beforeunload",this.saveState.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveState.bind(this)),this.saveState()}},{key:"saveState",value:function(){for(var e in this.state)"isLoaded"===e?localStorage.setItem(e,!1):localStorage.setItem(e,JSON.stringify(this.state[e]))}},{key:"hydrateStateWithLocalStorage",value:function(){for(var e in this.state)if(localStorage.hasOwnProperty(e)){var t=localStorage.getItem(e);try{t=JSON.parse(t),this.setState(Object(f.a)({},e,t))}catch(a){this.setState(Object(f.a)({},e,t))}}}},{key:"updateTitle",value:function(e){this.setState({title:e})}},{key:"updateIsLoaded",value:function(){this.state.isLoaded?this.setState({isLoaded:!1}):this.setState({isLoaded:!0})}},{key:"handleAfter",value:function(){this.setState({afterString:this.props.posts[this.props.posts.length-1].data.name})}},{key:"createArray",value:function(){var e=this.props.posts.map(function(e){return e.data.url.includes("png")||e.data.url.includes("jpg")||e.data.url.includes("gif")||e.data.url.includes("gfycat")||e.data.url.includes("youtube")?e.data.url:e.data.thumbnail});this.setState({array:e})}},{key:"handleReddit",value:function(e){e.preventDefault(),window.open(e.target.dataset.link,"_blank")}},{key:"renderPosts",value:function(){var e=this;return this.state.array.map(function(t,a){var n=e.props.posts[a].data.title;if(n.length>50&&(n=n.slice(0,50).concat("...")),(e.state.viewNsfw||!e.props.posts[a]||!e.props.posts[a].data.parent_whitelist_status||!e.props.posts[a].data.parent_whitelist_status.includes("nsfw"))&&void 0!==t){if(t.includes("png")||t.includes("jpg"))return r.a.createElement("li",{className:"image deactive",key:a},r.a.createElement("a",{href:e.props.posts[a].data.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"image_overlay"},r.a.createElement("div",{className:"title_hover",onClick:e.handleReddit.bind(e),"data-link":"https://reddit.com".concat(e.props.posts[a].data.permalink)},n)),r.a.createElement("img",{src:t,alt:t.title})));if(t.includes("gfycat")){var s;s=t.includes("detail/")?t.indexOf("detail/")+7:t.indexOf(".com/")+5;var i="https://gfycat.com/ifr/"+t.slice(s);return r.a.createElement("li",{className:"image deactive",key:a},r.a.createElement("a",{href:e.props.posts[a].data.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"image_overlay"},r.a.createElement("div",{className:"title_hover",onClick:e.handleReddit.bind(e),"data-link":"https://reddit.com".concat(e.props.posts[a].data.permalink)},n)),r.a.createElement("iframe",{className:"gfycat",src:i,scrolling:"no",frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0})))}if(t.includes("gif")){if("v"===t[t.length-1]){var o=t.indexOf(".gifv"),l=t.slice(0,o)+".mp4";return r.a.createElement("li",{className:"image deactive",key:a},r.a.createElement("a",{href:e.props.posts[a].data.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"image_overlay"},r.a.createElement("div",{className:"title_hover",onClick:e.handleReddit.bind(e),"data-link":"https://reddit.com".concat(e.props.posts[a].data.permalink)},n)),r.a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,src:l})))}return r.a.createElement("li",{className:"image deactive",key:a},r.a.createElement("a",{href:e.props.posts[a].data.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"image_overlay"},r.a.createElement("div",{className:"title_hover",onClick:e.handleReddit.bind(e),"data-link":"https://reddit.com".concat(e.props.posts[a].data.permalink)},n)),r.a.createElement("img",{src:t,alt:t.title})))}if(t.includes("youtube")){var c=e.props.posts[a].data.url.replace("watch?v=","embed/");return r.a.createElement("li",{className:"ytvideo",key:a},r.a.createElement("a",{href:e.props.posts[a].data.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"image_overlay"},r.a.createElement("div",{className:"title_hover",onClick:e.handleReddit.bind(e),"data-link":"https://reddit.com".concat(e.props.posts[a].data.permalink)},n)),r.a.createElement("iframe",{height:"300",width:"500px",src:c,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})))}if(t.includes("imgur")){var d=t;e.props.scrapeImgur(d).then(function(){var s=e.props.imgurUrl,i=s.indexOf("i.imgur"),o=s.slice(i);return r.a.createElement("li",{className:"image deactive",key:a},r.a.createElement("a",{href:e.props.posts[a].data.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"image_overlay"},r.a.createElement("div",{className:"title_hover",onClick:e.handleReddit.bind(e),"data-link":"https://reddit.com".concat(e.props.posts[a].data.permalink)},n)),r.a.createElement("img",{src:o,alt:t.title})))})}}})}},{key:"handleLayoutComplete",value:function(e){setTimeout(function(){return e.forEach(function(e){e.element.className="image active"})},2500)}},{key:"handleNSFW",value:function(e){e.preventDefault(),this.state.viewNsfw?this.setState({viewNsfw:!1}):this.setState({viewNsfw:!0})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),this.props.requestPosts(this.state.afterString,this.props.posts.length,this.state.title).then(function(){return t.handleAfter()}).then(function(){return t.createArray()})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?r.a.createElement("div",null,r.a.createElement(g,{title:this.state.title,viewNsfw:this.state.viewNsfw,handleNSFW:this.handleNSFW,createArray:this.createArray,updateIsLoaded:this.updateIsLoaded,requestPosts:this.props.requestPosts,clearPosts:this.props.clearPosts,updateTitle:this.updateTitle}),r.a.createElement("br",null),r.a.createElement(y.a,{className:"my-gallery-class",elementType:"ul",options:E,onLayoutComplete:function(t){return e.handleLayoutComplete(t)}},this.renderPosts()),r.a.createElement("div",{className:"load-button"},r.a.createElement("button",{className:"load_button",onClick:this.handleClick},"Load More"))):r.a.createElement("div",null,"Loading...")}}]),t}(n.Component),S=a(86),w=a.n(S),O=function(e,t,a,n){return function(r){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25;return w.a.ajax({method:"GET",url:"https://www.reddit.com/r/".concat(a,".json?limit=").concat(n,"&after=").concat(e,"&count=").concat(t),dataType:"json"})}(e,t,a,n).then(function(e){return r({type:"RECEIVE_POSTS",posts:e.data.children})})}},N=Object(o.b)(function(e){return{posts:(t=e.posts,Object.keys(t).map(function(e){return t[e]}))};var t},function(e){return{requestPosts:function(t,a,n,r){return e(O(t,a,n,r))},clearPosts:function(){return e({type:"CLEAR_POSTS"})}}})(k),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{exact:!0,path:"/",component:N}),r.a.createElement("footer",null))}}]),t}(n.Component),L=function(e){var t=e.store;return r.a.createElement(o.a,{store:t},r.a.createElement(l.a,null,r.a.createElement(j,null)))},_=a(12),C=(a(212),a(88)),P=a(89),I=a.n(P),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_POSTS":var a=Object.assign({},e),n=Object.keys(a).length;return t.posts.forEach(function(e,t){a[n+t+1]=e}),I()({},a);case"CLEAR_POSTS":return{};default:return e}},T=Object(_.c)({posts:A}),R=[C.a];var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_.d)(T,e,_.a.apply(void 0,R))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.addEventListener("DOMContentLoaded",function(){var e=W();window.getState=e.getState,window.dispatch=e.dispatch;var t=document.getElementById("root");i.a.render(r.a.createElement(L,{store:e}),t)}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},91:function(e,t,a){e.exports=a(219)},96:function(e,t,a){}},[[91,2,1]]]);
//# sourceMappingURL=main.db95ff37.chunk.js.map